
Operating systems provide foundational abstractions like **processes**, **address spaces**, and **files** that are essential for understanding their functionality.

---

### 6.1 Processes

- **Definition**: A process is a program in execution, including its code, data, and runtime state.
- **Address Space**: Each process has an **address space**—a range of memory locations (0 to some maximum) it can read or write. This space contains:
    - The executable program.
    - Program data.
    - The stack (for function calls and local variables).

#### Example

Imagine you are:

1. Editing a video.
2. Running a video conversion.
3. Browsing the web.
4. Checking emails.  
    All these activities represent separate **processes** that the operating system switches between to execute concurrently.

---

### Process Suspension and Resumption

- When a process is suspended, its state must be preserved to resume later.
- Operating systems store this information in a **process table**, an array of structures containing:
    - Address space (core image).
    - Register contents.
    - Other necessary data to restart the process from where it was paused.

---

### Process Trees

- Processes can create other processes, forming a **process tree**:
    - Parent and child processes may cooperate to complete a task.
    - **Inter-process communication (IPC)** allows related processes to share information or synchronize their actions.

---

### Handling Delays and Lost Messages

- If a process requires data from an external source (e.g., a server), delays or message losses can occur.
- To mitigate this:
    1. The process sets a **timer** and continues other tasks.
    2. If no acknowledgment is received within the specified time, the OS sends an **alarm signal** to the process.
    3. The signal triggers a **signal handler**, which retransmits the message or takes corrective action.
    4. After the handler completes, the process resumes from its previous state.

---

### Signals and Traps

- **Signals**: Software equivalents of hardware interrupts used to notify a process of events like:
    - Timer expiration.
    - Illegal instructions.
    - Invalid memory access.
- When a signal occurs:
    1. The process saves its state (e.g., registers).
    2. Executes the **signal handler** to address the issue.
    3. Resumes execution from the saved state.

---

### Summary

- A **process** encapsulates everything needed to execute a program, including its memory and runtime state.
- Processes can create **process trees** and communicate via IPC.
- Signals act as an essential mechanism for managing unexpected events or delays, ensuring processes handle errors and resume seamlessly.  
    This abstraction simplifies multitasking and process management in modern operating systems.


### 6.2 Address Spaces

**Main Memory** is the computer's primary storage used to hold executing programs. In simple operating systems, only one program resides in memory at a time, necessitating **swapping**—removing the current program to load another.

---

### Multi-programming and Memory Protection

- Advanced operating systems allow **multiple programs** to reside in memory simultaneously.
- **Protection Mechanism**: Prevents programs from interfering with each other or the OS.
    - While hardware provides the protection mechanism, the operating system controls its use.

---

### Address Space Management

- Each process is allocated an **address space**, a range of memory addresses it can utilize, typically starting from **0** to a defined maximum.
- Initially, the address space was limited by the physical memory capacity. However, modern systems often have larger address spaces than the physical memory due to **32-bit (4 GB)** or **64-bit (16 EB)** address ranges.

#### Challenge:

- **What if the address space exceeds physical memory?**
    - Early systems couldn’t handle this, leading to program failure.

#### Solution: Virtual Memory

- **Virtual Memory** abstracts the address space, allowing it to exceed the physical memory capacity.
    - The OS stores parts of the address space in main memory and parts on disk or SSD.
    - It dynamically **swaps** data between main memory and storage as needed.

**Benefits of Virtual Memory**:

1. Provides the illusion of a larger memory space.
2. Decouples address space from physical memory size, enabling efficient multi-programming.
3. Enhances security by isolating process memory.

